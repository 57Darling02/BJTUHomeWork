import{r as L,e as S,f as M,d as T,t as O,h as g,w as j,g as x,b as q,v as D,T as U,n as $,i as E,j as N,k as F,l as G,c as H,a as i,m as K,p as Y,q as Z,s as h,x as J,y as Q,z as W,o as X,_ as ee}from"./index-DEs0-6rQ.js";import{u as te,r as C,i as se,g as b,a as V,b as le,l as oe,E as ne}from"./Login-C49GGB7r.js";function ae(t){let e;const s=L(!1),l=S({...t,originalPosition:"",originalOverflow:"",visible:!1});function a(n){l.text=n}function r(){const n=l.parent,c=m.ns;if(!n.vLoadingAddClassList){let f=n.getAttribute("loading-number");f=Number.parseInt(f)-1,f?n.setAttribute("loading-number",f.toString()):(C(n,c.bm("parent","relative")),n.removeAttribute("loading-number")),C(n,c.bm("parent","hidden"))}d(),p.unmount()}function d(){var n,c;(c=(n=m.$el)==null?void 0:n.parentNode)==null||c.removeChild(m.$el)}function v(){var n;t.beforeClose&&!t.beforeClose()||(s.value=!0,clearTimeout(e),e=setTimeout(o,400),l.visible=!1,(n=t.closed)==null||n.call(t))}function o(){if(!s.value)return;const n=l.parent;s.value=!1,n.vLoadingAddClassList=void 0,r()}const u=T({name:"ElLoading",setup(n,{expose:c}){const{ns:f,zIndex:P}=te("loading");return c({ns:f,zIndex:P}),()=>{const _=l.spinner||l.svg,z=g("svg",{class:"circular",viewBox:l.svgViewBox?l.svgViewBox:"0 0 50 50",..._?{innerHTML:_}:{}},[g("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),R=l.text?g("p",{class:f.b("text")},[l.text]):void 0;return g(U,{name:f.b("fade"),onAfterLeave:o},{default:j(()=>[x(q("div",{style:{backgroundColor:l.background||""},class:[f.b("mask"),l.customClass,l.fullscreen?"is-fullscreen":""]},[g("div",{class:f.b("spinner")},[z,R])]),[[D,l.visible]])])})}}}),p=M(u),m=p.mount(document.createElement("div"));return{...O(l),setText:a,removeElLoadingChild:d,close:v,handleAfterLeave:o,vm:m,get $el(){return m.$el}}}let y;const k=function(t={}){if(!se)return;const e=re(t);if(e.fullscreen&&y)return y;const s=ae({...e,closed:()=>{var a;(a=e.closed)==null||a.call(e),e.fullscreen&&(y=void 0)}});ie(e,e.parent,s),A(e,e.parent,s),e.parent.vLoadingAddClassList=()=>A(e,e.parent,s);let l=e.parent.getAttribute("loading-number");return l?l=`${Number.parseInt(l)+1}`:l="1",e.parent.setAttribute("loading-number",l),e.parent.appendChild(s.$el),$(()=>s.visible.value=e.visible),e.fullscreen&&(y=s),s},re=t=>{var e,s,l,a;let r;return E(t.target)?r=(e=document.querySelector(t.target))!=null?e:document.body:r=t.target||document.body,{parent:r===document.body||t.body?document.body:r,background:t.background||"",svg:t.svg||"",svgViewBox:t.svgViewBox||"",spinner:t.spinner||!1,text:t.text||"",fullscreen:r===document.body&&((s=t.fullscreen)!=null?s:!0),lock:(l=t.lock)!=null?l:!1,customClass:t.customClass||"",visible:(a=t.visible)!=null?a:!0,beforeClose:t.beforeClose,closed:t.closed,target:r}},ie=async(t,e,s)=>{const{nextZIndex:l}=s.vm.zIndex||s.vm._.exposed.zIndex,a={};if(t.fullscreen)s.originalPosition.value=b(document.body,"position"),s.originalOverflow.value=b(document.body,"overflow"),a.zIndex=l();else if(t.parent===document.body){s.originalPosition.value=b(document.body,"position"),await $();for(const r of["top","left"]){const d=r==="top"?"scrollTop":"scrollLeft";a[r]=`${t.target.getBoundingClientRect()[r]+document.body[d]+document.documentElement[d]-Number.parseInt(b(document.body,`margin-${r}`),10)}px`}for(const r of["height","width"])a[r]=`${t.target.getBoundingClientRect()[r]}px`}else s.originalPosition.value=b(e,"position");for(const[r,d]of Object.entries(a))s.$el.style[r]=d},A=(t,e,s)=>{const l=s.vm.ns||s.vm._.exposed.ns;["absolute","fixed","sticky"].includes(s.originalPosition.value)?C(e,l.bm("parent","relative")):V(e,l.bm("parent","relative")),t.fullscreen&&t.lock?V(e,l.bm("parent","hidden")):C(e,l.bm("parent","hidden"))},w=Symbol("ElLoading"),B=(t,e)=>{var s,l,a,r;const d=e.instance,v=n=>N(e.value)?e.value[n]:void 0,o=n=>{const c=E(n)&&(d==null?void 0:d[n])||n;return c&&L(c)},u=n=>o(v(n)||t.getAttribute(`element-loading-${G(n)}`)),p=(s=v("fullscreen"))!=null?s:e.modifiers.fullscreen,m={text:u("text"),svg:u("svg"),svgViewBox:u("svgViewBox"),spinner:u("spinner"),background:u("background"),customClass:u("customClass"),fullscreen:p,target:(l=v("target"))!=null?l:p?void 0:t,body:(a=v("body"))!=null?a:e.modifiers.body,lock:(r=v("lock"))!=null?r:e.modifiers.lock};t[w]={options:m,instance:k(m)}},ue=(t,e)=>{for(const s of Object.keys(e))F(e[s])&&(e[s].value=t[s])},I={mounted(t,e){e.value&&B(t,e)},updated(t,e){const s=t[w];e.oldValue!==e.value&&(e.value&&!e.oldValue?B(t,e):e.value&&e.oldValue?N(e.value)&&ue(e.value,s.options):s==null||s.instance.close())},unmounted(t){var e;(e=t[w])==null||e.instance.close(),t[w]=null}},de={install(t){t.directive("loading",I),t.config.globalProperties.$loading=k},directive:I,service:k},ce={class:"input-wrap"},ve={class:"input-wrap"},fe=["type"],me={class:"rem"},pe=T({__name:"LoginPanel",setup(t){const e=W(),s=L("password");function l(){s.value=s.value==="password"?"text":"password"}const a=S({username:"",password:"",remb:!1});async function r(){const v=de.service({});try{const o=await le();await oe(o,{username:a.username,password:a.password||""}),e.push({name:"main"})}catch(o){ne({title:"登录失败",message:o.message,type:"error"})}finally{v.close()}}function d(){alert("没办法")}return(v,o)=>(X(),H("form",{id:"login-form",onSubmit:Q(r,["prevent"])},[o[6]||(o[6]=i("h1",null," 登入作业平台 ",-1)),i("div",ce,[x(i("input",{type:"text",placeholder:"学号","onUpdate:modelValue":o[0]||(o[0]=u=>a.username=u),spellcheck:"false",autocomplete:"username",required:""},null,512),[[K,a.username]]),o[3]||(o[3]=i("i",{class:"fa-solid fa-user"},null,-1))]),i("div",ve,[x(i("input",{type:s.value,placeholder:"如空将使用默认密码","onUpdate:modelValue":o[1]||(o[1]=u=>a.password=u),spellcheck:"false",autocomplete:"current-password"},null,8,fe),[[Y,a.password]]),i("i",{class:Z([s.value=="password"?"fa-solid fa-eye":"fa-solid fa-eye-slash","toggle-password"]),onClick:l},null,2)]),i("div",me,[i("label",null,[x(i("input",{type:"checkbox","onUpdate:modelValue":o[2]||(o[2]=u=>a.remb=u)},null,512),[[J,a.remb]]),o[4]||(o[4]=h(" Remenber me "))]),i("div",null,[i("a",{href:"#",onClick:d},"Forget password?")])]),o[7]||(o[7]=i("button",null,"Login",-1)),i("p",{class:"reg"},[o[5]||(o[5]=h("Don't have account? ")),i("a",{onClick:d},"Register")])],32))}}),ye=ee(pe,[["__scopeId","data-v-d02cd48d"]]);export{ye as default};
