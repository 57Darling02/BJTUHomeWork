import{r as L,e as S,f as M,d as T,t as O,h as p,w as j,g as x,b as q,v as D,T as U,n as $,i as E,j as N,k as F,l as G,c as H,a as i,m as K,p as Y,q as Z,s as h,x as J,y as Q,z as W,o as X,_ as ee}from"./index-CazRVDVK.js";import{u as te,r as C,i as se,g as b,a as V,b as oe,l as le,E as ne}from"./Login-D7UYjt79.js";function ae(t){let e;const s=L(!1),o=S({...t,originalPosition:"",originalOverflow:"",visible:!1});function a(n){o.text=n}function r(){const n=o.parent,c=m.ns;if(!n.vLoadingAddClassList){let f=n.getAttribute("loading-number");f=Number.parseInt(f)-1,f?n.setAttribute("loading-number",f.toString()):(C(n,c.bm("parent","relative")),n.removeAttribute("loading-number")),C(n,c.bm("parent","hidden"))}d(),g.unmount()}function d(){var n,c;(c=(n=m.$el)==null?void 0:n.parentNode)==null||c.removeChild(m.$el)}function v(){var n;t.beforeClose&&!t.beforeClose()||(s.value=!0,clearTimeout(e),e=setTimeout(l,400),o.visible=!1,(n=t.closed)==null||n.call(t))}function l(){if(!s.value)return;const n=o.parent;s.value=!1,n.vLoadingAddClassList=void 0,r()}const u=T({name:"ElLoading",setup(n,{expose:c}){const{ns:f,zIndex:P}=te("loading");return c({ns:f,zIndex:P}),()=>{const _=o.spinner||o.svg,z=p("svg",{class:"circular",viewBox:o.svgViewBox?o.svgViewBox:"0 0 50 50",..._?{innerHTML:_}:{}},[p("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),R=o.text?p("p",{class:f.b("text")},[o.text]):void 0;return p(U,{name:f.b("fade"),onAfterLeave:l},{default:j(()=>[x(q("div",{style:{backgroundColor:o.background||""},class:[f.b("mask"),o.customClass,o.fullscreen?"is-fullscreen":""]},[p("div",{class:f.b("spinner")},[z,R])]),[[D,o.visible]])])})}}}),g=M(u),m=g.mount(document.createElement("div"));return{...O(o),setText:a,removeElLoadingChild:d,close:v,handleAfterLeave:l,vm:m,get $el(){return m.$el}}}let y;const k=function(t={}){if(!se)return;const e=re(t);if(e.fullscreen&&y)return y;const s=ae({...e,closed:()=>{var a;(a=e.closed)==null||a.call(e),e.fullscreen&&(y=void 0)}});ie(e,e.parent,s),A(e,e.parent,s),e.parent.vLoadingAddClassList=()=>A(e,e.parent,s);let o=e.parent.getAttribute("loading-number");return o?o=`${Number.parseInt(o)+1}`:o="1",e.parent.setAttribute("loading-number",o),e.parent.appendChild(s.$el),$(()=>s.visible.value=e.visible),e.fullscreen&&(y=s),s},re=t=>{var e,s,o,a;let r;return E(t.target)?r=(e=document.querySelector(t.target))!=null?e:document.body:r=t.target||document.body,{parent:r===document.body||t.body?document.body:r,background:t.background||"",svg:t.svg||"",svgViewBox:t.svgViewBox||"",spinner:t.spinner||!1,text:t.text||"",fullscreen:r===document.body&&((s=t.fullscreen)!=null?s:!0),lock:(o=t.lock)!=null?o:!1,customClass:t.customClass||"",visible:(a=t.visible)!=null?a:!0,beforeClose:t.beforeClose,closed:t.closed,target:r}},ie=async(t,e,s)=>{const{nextZIndex:o}=s.vm.zIndex||s.vm._.exposed.zIndex,a={};if(t.fullscreen)s.originalPosition.value=b(document.body,"position"),s.originalOverflow.value=b(document.body,"overflow"),a.zIndex=o();else if(t.parent===document.body){s.originalPosition.value=b(document.body,"position"),await $();for(const r of["top","left"]){const d=r==="top"?"scrollTop":"scrollLeft";a[r]=`${t.target.getBoundingClientRect()[r]+document.body[d]+document.documentElement[d]-Number.parseInt(b(document.body,`margin-${r}`),10)}px`}for(const r of["height","width"])a[r]=`${t.target.getBoundingClientRect()[r]}px`}else s.originalPosition.value=b(e,"position");for(const[r,d]of Object.entries(a))s.$el.style[r]=d},A=(t,e,s)=>{const o=s.vm.ns||s.vm._.exposed.ns;["absolute","fixed","sticky"].includes(s.originalPosition.value)?C(e,o.bm("parent","relative")):V(e,o.bm("parent","relative")),t.fullscreen&&t.lock?V(e,o.bm("parent","hidden")):C(e,o.bm("parent","hidden"))},w=Symbol("ElLoading"),B=(t,e)=>{var s,o,a,r;const d=e.instance,v=n=>N(e.value)?e.value[n]:void 0,l=n=>{const c=E(n)&&(d==null?void 0:d[n])||n;return c&&L(c)},u=n=>l(v(n)||t.getAttribute(`element-loading-${G(n)}`)),g=(s=v("fullscreen"))!=null?s:e.modifiers.fullscreen,m={text:u("text"),svg:u("svg"),svgViewBox:u("svgViewBox"),spinner:u("spinner"),background:u("background"),customClass:u("customClass"),fullscreen:g,target:(o=v("target"))!=null?o:g?void 0:t,body:(a=v("body"))!=null?a:e.modifiers.body,lock:(r=v("lock"))!=null?r:e.modifiers.lock};t[w]={options:m,instance:k(m)}},ue=(t,e)=>{for(const s of Object.keys(e))F(e[s])&&(e[s].value=t[s])},I={mounted(t,e){e.value&&B(t,e)},updated(t,e){const s=t[w];e.oldValue!==e.value&&(e.value&&!e.oldValue?B(t,e):e.value&&e.oldValue?N(e.value)&&ue(e.value,s.options):s==null||s.instance.close())},unmounted(t){var e;(e=t[w])==null||e.instance.close(),t[w]=null}},de={install(t){t.directive("loading",I),t.config.globalProperties.$loading=k},directive:I,service:k},ce={class:"input-wrap"},ve={class:"input-wrap"},fe=["type"],me={class:"rem"},ge=T({__name:"LoginPanel",setup(t){const e=W(),s=L("password");function o(){s.value=s.value==="password"?"text":"password"}const a=S({username:"",password:"",remb:!1});async function r(){const v=de.service({});try{const l=await oe();await le(l,{username:a.username,password:a.password||""}),e.push({name:"main"})}catch(l){ne({title:"登录失败",message:l.message,type:"error"})}finally{v.close()}}function d(){alert("没办法")}return(v,l)=>(X(),H("form",{id:"login-form",onSubmit:Q(r,["prevent"])},[l[6]||(l[6]=i("h1",null," 登入作业平台 ",-1)),i("div",ce,[x(i("input",{type:"text",placeholder:"学号","onUpdate:modelValue":l[0]||(l[0]=u=>a.username=u),required:""},null,512),[[K,a.username]]),l[3]||(l[3]=i("i",{class:"fa-solid fa-user"},null,-1))]),i("div",ve,[x(i("input",{type:s.value,placeholder:"如空将使用默认密码","onUpdate:modelValue":l[1]||(l[1]=u=>a.password=u)},null,8,fe),[[Y,a.password]]),i("i",{class:Z([s.value=="password"?"fa-solid fa-eye":"fa-solid fa-eye-slash","toggle-password"]),onClick:o},null,2)]),i("div",me,[i("label",null,[x(i("input",{type:"checkbox","onUpdate:modelValue":l[2]||(l[2]=u=>a.remb=u)},null,512),[[J,a.remb]]),l[4]||(l[4]=h(" Remenber me "))]),i("div",null,[i("a",{href:"#",onClick:d},"Forget password?")])]),l[7]||(l[7]=i("button",null,"Login",-1)),i("p",{class:"reg"},[l[5]||(l[5]=h("Don't have account? ")),i("a",{onClick:d},"Register")])],32))}}),ye=ee(ge,[["__scopeId","data-v-336b2807"]]);export{ye as default};
